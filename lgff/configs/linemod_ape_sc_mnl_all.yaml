# =========================================
# LGFF Single-Class Config (LINEMOD - APE)
# =========================================

# ---------- Dataset / BOP ----------
dataset_name: "bop-single"

# 指向完整的 BOP 数据集根目录（LINEMOD = lm）。
# 训练/评估时只会通过 obj_id=1 过滤出 ape 的图像。
dataset_root: "datasets/bop/lm"

obj_id: 1
num_points: 1024
num_keypoints: 8
val_split: "test"               # 与裁剪脚本输出的 split 对齐

# 裁剪后输入尺寸
resize_h: 128
resize_w: 128

# 深度缩放（BOP 默认毫米 -> 米）
depth_scale: 1000.0

# ---------- Dataloader ----------
batch_size: 32
num_workers: 8

# ---------- Training Hyper-params ----------
epochs: 50
lr: 0.0001
weight_decay: 0.00001
use_amp: true
log_interval: 20

# LR Scheduler（plateau / cosine / step / none）
scheduler: "plateau"
lr_patience: 10
lr_factor: 0.5
lr_min: 0.000001
lr_step_size: 30

# 梯度裁剪
max_grad_norm: 2.0

# ---------- Model / Backbone ----------
backbone_name: "mobilenet_v3_large"
backbone_arch: "large"
backbone_output_stride: 8
backbone_pretrained: true
backbone_freeze_bn: true
backbone_return_intermediate: false
backbone_low_level_index: 2

rgb_feat_dim: 128
geo_feat_dim: 128

# ---------- PointNet Branch ----------
point_input_dim: 3
point_hidden_dims: [64, 128]
point_norm: "bn"
point_use_se: true
point_dropout: 0.0

# ---------- Head ----------
head_hidden_dim: 128
head_feat_dim: 64
head_dropout: 0.0

# ---------- Loss & Symmetry ----------
w_rate: 0.015
sym_class_ids: []          # ape 非对称

# ---------- Logging / Output ----------
log_dir: "output/linemod_ape_sc_mnl_all"
# 不写 work_dir 会默认使用 log_dir
